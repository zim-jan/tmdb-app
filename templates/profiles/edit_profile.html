{% extends "base.html" %}

{% block title %}Edit Profile{% endblock %}

{% block content %}
<div class="container" style="margin-top: 3rem; max-width: 800px;">
    <div class="card">
        <div class="card-body">
            <h1 style="margin-bottom: 1.5rem;">Edit Profile</h1>

            <form method="post">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="bio">Bio</label>
                    <textarea name="bio" id="bio" class="form-control" rows="4" 
                              placeholder="Tell us about yourself...">{{ profile.bio }}</textarea>
                    <small style="color: var(--text-muted); display: block; margin-top: 0.25rem;">
                        Share a bit about your interests and favorite movies/shows
                    </small>
                </div>

                <div class="form-group">
                    <label for="avatar_url">Avatar URL</label>
                    <input type="url" name="avatar_url" id="avatar_url" class="form-control" 
                           placeholder="https://example.com/avatar.jpg" value="{{ profile.avatar_url }}">
                    <small style="color: var(--text-muted); display: block; margin-top: 0.25rem;">
                        Link to your profile picture
                    </small>
                </div>

                <h2 style="margin: 2rem 0 1rem; font-size: 1.5rem;">Privacy Settings</h2>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" name="is_visible" {% if profile.is_visible %}checked{% endif %}>
                        <span>Make my profile public</span>
                    </label>
                    <small style="color: var(--text-muted); display: block; margin-top: 0.25rem; margin-left: 1.5rem;">
                        Allow others to view your profile at /u/{{ user.nickname }}
                    </small>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" name="show_lists" {% if profile.show_lists %}checked{% endif %}>
                        <span>Show my public lists</span>
                    </label>
                    <small style="color: var(--text-muted); display: block; margin-top: 0.25rem; margin-left: 1.5rem;">
                        Display your public lists on your profile
                    </small>
                </div>

                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" name="show_watched_episodes" {% if profile.show_watched_episodes %}checked{% endif %}>
                        <span>Show my watch history</span>
                    </label>
                    <small style="color: var(--text-muted); display: block; margin-top: 0.25rem; margin-left: 1.5rem;">
                        Display your recently watched episodes on your profile
                    </small>
                </div>

                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                    <a href="{% url 'users:profile' %}" class="btn">Cancel</a>
                </div>
            </form>

            <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--border-color);">

            <div>
                <h3 style="margin-bottom: 1rem;">Public Profile URL</h3>
                <div style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
                    <code style="color: var(--primary-color);">
                        {{ request.scheme }}://{{ request.get_host }}/u/{{ user.nickname }}
                    </code>
                    <button onclick="navigator.clipboard.writeText('{{ request.scheme }}://{{ request.get_host }}/u/{{ user.nickname }}')" 
                            class="btn btn-sm">
                        Copy
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
